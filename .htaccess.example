# Expense Tracker - Apache Configuration
# Copy this file to .htaccess and replace YOUR_FOLDER_NAME with your actual folder name
# Or run install.php to auto-generate this file

# Enable rewrite engine
RewriteEngine On

# Set base directory (CHANGE THIS to your folder name)
RewriteBase /YOUR_FOLDER_NAME/

# Redirect all requests to public folder (except api and existing files)
RewriteCond %{REQUEST_URI} !^/YOUR_FOLDER_NAME/public/
RewriteCond %{REQUEST_URI} !^/YOUR_FOLDER_NAME/api/
RewriteRule ^(.*)$ public/$1 [L]

# Block access to sensitive directories
RewriteRule ^config/ - [F,L]
RewriteRule ^core/ - [F,L]
RewriteRule ^logs/ - [F,L]
RewriteRule ^database/ - [F,L]

# Block access to hidden files
RewriteRule (^\.|/\.) - [F,L]

# Block access to sensitive file types
<FilesMatch "\.(sql|log|ini|env|bak|old)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# PHP configuration for upload sizes
<IfModule mod_php.c>
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 60
    php_value max_input_time 60
</IfModule>

# Enable CORS for API
<IfModule mod_headers.c>
    Header always set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"
</IfModule>

# Prevent directory listing
Options -Indexes

# Character encoding
AddDefaultCharset UTF-8

# Security headers
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>
